var threadedVar: Int = 0

fun add1000(): Int {
        while  threadedVar < 1000 {
            protect : {
                if (threadedVar < 1000) {
                    threadedVar = threadedVar + 1
                }
            }
        }
        return 1
}

launch var returned : Int = add1000()
launch var returned2 : Int = add1000()
launch var returned3 : Int = add1000()
launch var returned4 : Int = add1000()

wait(returned)
wait(returned2)
wait(returned3)
wait(returned4)

print("ThreadedVar : " + threadedVar)

